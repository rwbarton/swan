% Listing style definition for the Lean Theorem Prover.
% Defined by Jeremy Avigad, 2015, by modifying Assia Mahboubi's SSR style.
% Unicode replacements taken from Olivier Verdier's unixode.sty

\lstdefinelanguage{lean} {

% Anything betweeen $ becomes LaTeX math mode
mathescape=true,
% Comments may or not include Latex commands
texcl=false,

% keywords, list taken from lean-syntax.el
morekeywords=[1]{
import, prelude, tactic_hint, protected, private, noncomputable, definition, renaming, def,
hiding, exposing, parameter, parameters, begin, begin+, proof, qed, conjecture, constant, constants,
hypothesis, lemma, corollary, variable, variables, premise, premises, theory,
print, theorem, proposition, example, abbreviation, abstract,
open, as, export, override, axiom, axioms, inductive, with, structure, record, universe, universes,
alias, help, environment, options, precedence, reserve,
match, infix, infixl, infixr, notation, postfix, prefix,
tactic_infix, tactic_infixl, tactic_infixr, tactic_notation, tactic_postfix, tactic_prefix,
eval, coercion, end, reveal, this, suppose,
using, namespace, section, fields, find_decl,
attribute, local, set_option, extends, include, omit, classes,
instances, coercions, metaclasses, raw, migrate, replacing,
calc, have, obtains, show, suffices, by, by+, in, at, let, forall, Pi, fun,
exists, if, dif, then, else, assume, assert, take,
obtain, from, aliases
},

% Sorts
morekeywords=[2]{Type, Prop},

% tactics, list taken from lean-syntax.el
morekeywords=[3]{
Cond, or_else, then, try, when, assumption, eassumption, rapply,
apply, fapply, eapply, rename, intro, intros, all_goals, fold, focus, focus_at,
generalize, generalizes, clear, clears, revert, reverts, back, beta, done, exact, rexact,
refine, repeat, whnf, rotate, rotate_left, rotate_right, inversion, cases, rewrite,
xrewrite, krewrite, blast, simp, esimp, unfold, change, check_expr, contradiction,
exfalso, split, existsi, constructor, fconstructor, left, right, injection, congruence, reflexivity,
symmetry, transitivity, state, induction, induction_using, fail, append,
substvars, now, with_options, with_attributes, with_attrs, note
},

% modifiers, taken from lean-syntax.el
% note: 'otherkeywords' is needed because these use a different symbol.
% this command doesn't allow us to specify a number -- they are put with [1]
otherkeywords={
[persistent], [notation], [visible], [instance], [trans_instance],
[class], [parsing-only], [coercion], [unfold_full], [constructor],
[reducible], [irreducible], [semireducible], [quasireducible], [wf],
[whnf], [multiple_instances], [none], [decl], [declaration],
[relation], [symm], [subst], [refl], [trans], [simp], [congr],
[backward], [forward], [no_pattern], [begin_end], [tactic], [abbreviation],
[reducible], [unfold], [alias], [eqv], [intro], [intro!], [elim], [grinder],
[localrefinfo], [recursor]
},

% Various symbols
literate=
{â €}{{\ensuremath{ }}}1
{âŠ¨}{{\ensuremath{\models}}}1
{ğ’«}{{\ensuremath{\mathcal{P}}}}1
{â„™}{{\ensuremath{\mathbb{P}}}}1
{â‰¼}{{\ensuremath{\preceq}}}1
{â‰º}{{\ensuremath{\prec}}}1
{â‹‚}{{\ensuremath{\bigcap}}}1
{â‹ƒ}{{\ensuremath{\bigcup}}}1
{âˆ¼}{{\ensuremath{\sim}}}1
{ÌŒ }{{\ensuremath{\check{}}}}1
{ğ’}{{\ensuremath{\mathcal{C}}}}1
{âŠ”}{{\ensuremath{\sqcup}}}1
{âŠ“}{{\ensuremath{\sqcap}}}1
{â¨†}{{\ensuremath{\bigsqcup}}}1
{â¨…}{{\ensuremath{\bigsqcap}}}1
{âŠ¤}{{\ensuremath{\top}}}1
{ğ”¹}{{\ensuremath{\mathbb{B}}}}1
{Î±}{{\ensuremath{\mathrm{\alpha}}}}1
{Î²}{{\ensuremath{\mathrm{\beta}}}}1
{Î³}{{\ensuremath{\mathrm{\gamma}}}}1
{Î´}{{\ensuremath{\mathrm{\delta}}}}1
{Îµ}{{\ensuremath{\mathrm{\varepsilon}}}}1
{Î¶}{{\ensuremath{\mathrm{\zeta}}}}1
{Î·}{{\ensuremath{\mathrm{\eta}}}}1
{Î¸}{{\ensuremath{\mathrm{\theta}}}}1
{Î¹}{{\ensuremath{\mathrm{\iota}}}}1
{Îº}{{\ensuremath{\mathrm{\kappa}}}}1
{Î¼}{{\ensuremath{\mathrm{\mu}}}}1
{Î½}{{\ensuremath{\mathrm{\nu}}}}1
{Î¾}{{\ensuremath{\mathrm{\xi}}}}1
{Ï€}{{\ensuremath{\mathrm{\mathnormal{\pi}}}}}1
{Ï}{{\ensuremath{\mathrm{\rho}}}}1
{Ïƒ}{{\ensuremath{\mathrm{\sigma}}}}1
{Ï„}{{\ensuremath{\mathrm{\tau}}}}1
{Ï†}{{\ensuremath{\mathrm{\varphi}}}}1
{Ï•}{{\ensuremath{\mathrm{\varphi}}}}1
{Ï‡}{{\ensuremath{\mathrm{\chi}}}}1
{Ïˆ}{{\ensuremath{\mathrm{\psi}}}}1
{Ï‰}{{\ensuremath{\mathrm{\omega}}}}1

{Î“}{{\ensuremath{\Gamma}}}1
{Î”}{{\ensuremath{\Delta}}}1
{Î˜}{{\ensuremath{\mathrm{\Theta}}}}1
{Î›}{{\ensuremath{\mathrm{\Lambda}}}}1
{Î£}{{\ensuremath{\mathrm{\Sigma}}}}1
{Î¦}{{\ensuremath{\mathrm{\Phi}}}}1
{Î}{{\ensuremath{\mathrm{\Xi}}}}1
{Î¨}{{\ensuremath{\mathrm{\Psi}}}}1
{Î©}{{\ensuremath{\mathrm{\Omega}}}}1

{â„µ}{{\ensuremath{\aleph}}}1

{â‰¤}{{\ensuremath{\leq}}}1
{â‰¥}{{\ensuremath{\geq}}}1
{â‰ }{{\ensuremath{\neq}}}1
{â‰ˆ}{{\ensuremath{\approx}}}1
{â‰¡}{{\ensuremath{\equiv}}}1
{â‰ƒ}{{\ensuremath{\simeq}}}1

{â‰¤}{{\ensuremath{\leq}}}1
{â‰¥}{{\ensuremath{\geq}}}1

{âˆ‚}{{\ensuremath{\partial}}}1
{âˆ†}{{\ensuremath{\triangle}}}1 % or \laplace?

{âˆ«}{{\ensuremath{\int}}}1
{âˆ‘}{{\ensuremath{\mathrm{\Sigma}}}}1
{Î }{{\ensuremath{\mathrm{\Pi}}}}1

{âŠ¥}{{\ensuremath{\perp}}}1
{âˆ}{{\ensuremath{\infty}}}1
{âˆ‚}{{\ensuremath{\partial}}}1

{âˆ“}{{\ensuremath{\mp}}}1
{Â±}{{\ensuremath{\pm}}}1
{Ã—}{{\ensuremath{\times}}}1

{âŠ•}{{\ensuremath{\oplus}}}1
{âŠ—}{{\ensuremath{\otimes}}}1
{âŠ}{{\ensuremath{\boxplus}}}1

{âˆ‡}{{\ensuremath{\nabla}}}1
{âˆš}{{\ensuremath{\sqrt}}}1

{â¬}{{\ensuremath{\cdot}}}1
{â€¢}{{\ensuremath{\cdot}}}1
{âˆ˜}{{\ensuremath{\circ}}}1
{`}{{\ensuremath{{}^\backprime}}}1
{'}{{\ensuremath{{}^\prime}}}1

%{â»}{{\ensuremath{^{\textup{\kern1pt\rule{2pt}{0.3pt}\kern-1pt}}}}}1
{â»}{{\ensuremath{^{-}}}}1
{â–¸}{{\ensuremath{\mathsmaller\blacktriangleright}}}1 %% requires package relsize

{âˆ§}{{\ensuremath{\wedge}}}1
{âˆ¨}{{\ensuremath{\vee}}}1
{Â¬}{{\ensuremath{\neg}}}1
{âŠ¢}{{\ensuremath{\vdash}}}1

%{âŸ¨}{{\ensuremath{\left\langle}}}1
%{âŸ©}{{\ensuremath{\right\rangle}}}1
{âŸ¨}{{\ensuremath{\langle}}}1
{âŸ©}{{\ensuremath{\rangle}}}1

{â†¦}{{\ensuremath{\mapsto}}}1
{â†’}{{\ensuremath{\rightarrow}}}1
{â†”}{{\ensuremath{\leftrightarrow}}}1
{â‡’}{{\ensuremath{\Rightarrow}}}1
{âŸ¹}{{\ensuremath{\Longrightarrow}}}1
{â‡}{{\ensuremath{\Leftarrow}}}1
{âŸ¸}{{\ensuremath{\Longleftarrow}}}1

{âˆ©}{{\ensuremath{\cap}}}1
{âˆª}{{\ensuremath{\cup}}}1
{âŠ‚}{{\ensuremath{\subseteq}}}1
{âŠ†}{{\ensuremath{\subseteq}}}1
{âŠ„}{{\ensuremath{\nsubseteq}}}1
{âŠˆ}{{\ensuremath{\nsubseteq}}}1
{âŠƒ}{{\ensuremath{\supseteq}}}1
{âŠ‡}{{\ensuremath{\supseteq}}}1
{âŠ…}{{\ensuremath{\nsupseteq}}}1
{âŠ‰}{{\ensuremath{\nsupseteq}}}1
{âˆˆ}{{\ensuremath{\in}}}1
{âˆ‰}{{\ensuremath{\notin}}}1
{âˆ‹}{{\ensuremath{\ni}}}1
{âˆŒ}{{\ensuremath{\notni}}}1
{âˆ…}{{\ensuremath{\varnothing}}}1

{âˆ–}{{\ensuremath{\setminus}}}1
{â€ }{{\ensuremath{\dag}}}1

{â„•}{{\ensuremath{\mathbb{N}}}}1
{â„¤}{{\ensuremath{\mathbb{Z}}}}1
{â„}{{\ensuremath{\mathbb{R}}}}1
{â„š}{{\ensuremath{\mathbb{Q}}}}1
{â„‚}{{\ensuremath{\mathbb{C}}}}1
{âŒ}{{\ensuremath{\llcorner}}}1
{âŒŸ}{{\ensuremath{\lrcorner}}}1
{â¦ƒ}{{\ensuremath{\{\!|}}}1
{â¦„}{{\ensuremath{|\!\}}}}1

{â‚}{{\ensuremath{_1}}}1
{â‚‚}{{\ensuremath{_2}}}1
{â‚ƒ}{{\ensuremath{_3}}}1
{â‚„}{{\ensuremath{_4}}}1
{â‚…}{{\ensuremath{_5}}}1
{â‚†}{{\ensuremath{_6}}}1
{â‚‡}{{\ensuremath{_7}}}1
{â‚ˆ}{{\ensuremath{_8}}}1
{â‚‰}{{\ensuremath{_9}}}1
{â‚€}{{\ensuremath{_0}}}1

{Â¹}{{\ensuremath{^1}}}1
{Â²}{{\ensuremath{^2}}}1
{Â³}{{\ensuremath{^3}}}1
{â´}{{\ensuremath{^4}}}1
{âµ}{{\ensuremath{^5}}}1
{â¶}{{\ensuremath{^6}}}1
{â·}{{\ensuremath{^7}}}1
{â¸}{{\ensuremath{^8}}}1
{â¹}{{\ensuremath{^9}}}1
{â°}{{\ensuremath{^0}}}1


{áµ’}{{\textsuperscript{o}}}1
{áµ–}{{\textsuperscript{p}}}1
{á´®}{{\textsuperscript{B}}}1


{â‚™}{{\ensuremath{_n}}}1
{â‚˜}{{\ensuremath{_m}}}1
{â†‘}{{\ensuremath{\uparrow}}}1
{â†“}{{\ensuremath{\downarrow}}}1

% {â–¸}{{\ensuremath{\triangleright}}}1

{Î£}{{\color{symbolcolor}\ensuremath{\mathrm{\Sigma}}}}1
{Î }{{\color{symbolcolor}\ensuremath{\mathrm{\Pi}}}}1
{âˆ€}{{\color{symbolcolor}\ensuremath{\forall}}}1
{âˆƒ}{{\color{symbolcolor}\ensuremath{\exists}}}1
{Î»}{{\color{symbolcolor}\ensuremath{\mathrm{\lambda}}}}1
{Î©}{{\color{symbolcolor}\ensuremath{\mathrm{\Omega}}}}1

{:=}{{\color{symbolcolor}:=}}1
{=}{{\color{symbolcolor}=}}1
{<}{{\color{symbolcolor}<}}1
{+}{{\color{symbolcolor}+}}1
{*}{{\color{symbolcolor}\ensuremath{{}^{*}}}}1,

% Comments
%comment=[s][\itshape \color{commentcolor}]{/-}{-/},
morecomment=[s][\color{commentcolor}]{/-}{-/},
morecomment=[l][\itshape \color{commentcolor}]{--},

% Spaces are not displayed as a special character
showstringspaces=false,

% keep spaces
keepspaces=true,

% String delimiters
morestring=[b]",
morestring=[d]Â’,

% Size of tabulations
tabsize=3,

% Enables ASCII chars 128 to 255
extendedchars=false,

% Case sensitivity
sensitive=true,

% Automatic breaking of long lines
breaklines=true,

% Default style fors listingsred
basicstyle=\ttfamily,

% Position of captions is bottom
captionpos=b,

% Full flexible columns
columns=[l]fullflexible,


% Style for (listings') identifiers
identifierstyle={\ttfamily\color{black}},
% Note : highlighting of Coq identifiers is done through a new
% delimiter definition through an lstset at the begining of the
% document. Don't know how to do better.

% Style for declaration keywords
keywordstyle=[1]{\ttfamily\color{keywordcolor}},

% Style for sorts
keywordstyle=[2]{\ttfamily\color{sortcolor}},

% Style for tactics keywords
keywordstyle=[3]{\ttfamily\color{tacticcolor}},

% Style for attributes
keywordstyle=[4]{\ttfamily\color{attributecolor}},

% Style for strings
stringstyle=\ttfamily,

% Style for comments
% commentstyle={\ttfamily\footnotesize },
}